{% extends "base.html" %}

{% block content %}
<div class="d-flex flex-column min-vh-100">

  <!-- Contenu principal -->
  <main class="container mt-4 mb-4 flex-grow-1">
    <h3 class="mb-4">ðŸ“¢ Notifications</h3>

    {% if notifications %}
      <div class="list-group">
        {% for notif in notifications %}
          <a href="{% if request.utilisateur.est_bibliothecaire %}{% url 'gestion_rdv_bibliothecaire' %}{% else %}{% url 'gestion_rendezvous' %}{% endif %}?notif_id={{ notif.id }}" 
             class="list-group-item list-group-item-action d-flex justify-content-between align-items-center shadow-sm mb-2 rounded-3"
             style="border: 1px solid #e0e0e0; transition: all 0.2s ease;">
            
            <!-- Texte de la notification + titre/auteur du livre -->
            <span>
              {{ notif.message }}
              {% if notif.livre %}
                <br>
                <strong>Livre :</strong> {{ notif.livre.titre }} â€” <em>{{ notif.livre.auteur }}</em>
              {% endif %}
            </span>

            <!-- Date -->
            <small class="text-muted">{{ notif.created_at|date:"d/m/Y H:i" }}</small>
          </a>
        {% endfor %}
      </div>
    {% else %}
      <div class="alert alert-info text-center rounded-3 shadow-sm">
        Aucune nouvelle notification ðŸ“­
      </div>
    {% endif %}

  </main>
</div>
{% endblock %}








