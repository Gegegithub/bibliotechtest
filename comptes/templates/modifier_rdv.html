{% extends "base.html" %}
{% block content %}
<div class="container my-5" style="max-width: 600px;">
    <h2 class="mb-4 text-center fw-light" style="letter-spacing: 1px; color: #212529;">Modifier le rendez-vous</h2>

    <form method="post" class="p-4 shadow-sm rounded" style="background-color: #ffffff; border: 1px solid #e0e0e0;">
        {% csrf_token %}
        
        <!-- Nom et prénom de l'utilisateur (lecture seule) -->
        <div class="mb-3">
            <label class="form-label fw-semibold text-dark">Nom</label>
            <input type="text" class="form-control border-dark-subtle bg-light" value="{{ rdv.nom }}" readonly>
        </div>
        <div class="mb-3">
            <label class="form-label fw-semibold text-dark">Prénom</label>
            <input type="text" class="form-control border-dark-subtle bg-light" value="{{ rdv.prenom }}" readonly>
        </div>

        <!-- Date souhaitée modifiable -->
        <div class="mb-3">
            <label class="form-label fw-semibold text-dark">Date de rendez-vous</label>
            <input type="date" name="date_souhaitee" class="form-control border-dark-subtle" value="{{ rdv.date_souhaitee }}">
        </div>

        <!-- Statut modifiable -->
        <div class="mb-3">
            <label class="form-label fw-semibold text-dark">Statut</label>
            <select name="statut" class="form-select border-dark-subtle">
                <option value="en_attente" {% if rdv.statut == "en_attente" %}selected{% endif %}>En attente</option>
                <option value="confirme" {% if rdv.statut == "confirme" %}selected{% endif %}>Confirmé</option>
                <option value="annule" {% if rdv.statut == "annule" %}selected{% endif %}>Annulé</option>
                <option value="termine" {% if rdv.statut == "termine" %}selected{% endif %}>Terminé</option>
            </select>
        </div>

        <!-- Email de l'utilisateur (lecture seule) -->
        <div class="mb-3">
            <label class="form-label fw-semibold text-dark">Email utilisateur</label>
            <input type="email" class="form-control border-dark-subtle bg-light" value="{{ rdv.email }}" readonly>
        </div>

        <!-- Boutons Enregistrer et Annuler côte à côte -->
        <div class="d-flex justify-content-between mt-4">
            <!-- Bouton mis à jour pour notifier utilisateur et bibliothécaire -->
            <form method="post" action="{% url 'notifier_rdv' rdv.id %}" style="display:inline;">
                {% csrf_token %}
                <button type="submit" class="btn btn-sm btn-success">
                    Enregistrer et notifier utilisateur
                </button>
            </form>

            <a href="{% url 'gestion_rendezvous' %}" class="btn btn-outline-dark btn-lg text-uppercase fw-semibold" style="letter-spacing: 1px;">
                Annuler
            </a>
        </div>
    </form>
</div>

<style>
    .form-control:focus, .form-select:focus {
        box-shadow: none;
        border-color: #212529; /* noir subtil */
    }
    .border-dark-subtle {
        border: 1px solid #dee2e6;
        border-radius: 0.375rem;
    }
    .btn-dark, .btn-outline-dark {
        transition: background-color 0.2s ease, transform 0.1s ease;
    }
    .btn-dark:hover {
        background-color: #343434;
        transform: translateY(-1px);
    }
    .btn-outline-dark:hover {
        background-color: #212529;
        color: #ffffff;
        transform: translateY(-1px);
    }
</style>
{% endblock %}







