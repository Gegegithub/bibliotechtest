{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container my-5">
  <div class="card shadow-sm mx-auto" style="max-width: 900px;">

    <div class="card-header bg-white border-bottom d-flex align-items-center">
      {% static 'img/default-avatar.png' as default_avatar %}
      <img src="{{ user.profile.photo.url|default:default_avatar }}" 
           alt="Photo de profil" class="rounded-circle" width="80" height="80" style="object-fit: cover;">
      <div class="ms-3">
        <h2 class="mb-0">{{ user.get_full_name }}</h2>
        <small class="text-muted">{{ user.email }}</small>
      </div>
    </div>

    <div class="card-body px-4 py-4">
      <!-- Informations personnelles -->
      <section class="mb-4">
        <h5><i class="bi bi-person-fill me-2"></i>Informations personnelles</h5>
        <hr>
        <div class="row">
          <div class="col-md-6 mb-2">
            <strong>Nom et prénom :</strong> {{ user.get_full_name }}
          </div>
          <div class="col-md-6 mb-2">
            <strong>Adresse email :</strong> {{ user.email }}
          </div>
          <div class="col-md-6 mb-2">
            <strong>Numéro de téléphone :</strong> {{ user.profile.telephone|default:"Non renseigné" }}
          </div>
          <div class="col-md-6 mb-2">
            <strong>Adresse postale :</strong> 
            {% if user.profile.adresse %}
              {{ user.profile.adresse }}, {{ user.profile.code_postal }} {{ user.profile.ville }}
            {% else %}
              Non renseignée
            {% endif %}
          </div>
        </div>
      </section>

      <!-- Profil professionnel / Statut utilisateur -->
      <section class="mb-4">
        <h5><i class="bi bi-briefcase-fill me-2"></i>Profil professionnel / Statut utilisateur</h5>
        <hr>
        <div class="row">
          <div class="col-md-6 mb-2">
            <strong>Type d’utilisateur :</strong> {{ user.profile.type_utilisateur|default:"Non renseigné" }}
          </div>
          <div class="col-md-6 mb-2">
            <strong>Fonction / poste :</strong> {{ user.profile.fonction|default:"Non renseigné" }}
          </div>
          <div class="col-md-6 mb-2">
            <strong>Institution / entreprise :</strong> {{ user.profile.institution|default:"Non renseigné" }}
          </div>
          <div class="col-md-6 mb-2">
            <strong>Secteur d’activité :</strong> {{ user.profile.secteur_activite|default:"Non renseigné" }}
          </div>
        </div>
      </section>

      <!-- Informations liées à la bibliothèque -->
      <section class="mb-4">
        <h5><i class="bi bi-journal-bookmark-fill me-2"></i>Informations liées à la bibliothèque</h5>
        <hr>
        <div class="row">
          <div class="col-md-6 mb-2">
            <strong>Numéro d’abonné :</strong> {{ user.profile.numero_abonne|default:"Non renseigné" }}
          </div>
          <div class="col-md-6 mb-2">
            <strong>Date d’inscription :</strong> {{ user.date_joined|date:"d/m/Y" }}
          </div>
          <div class="col-md-6 mb-2">
            <strong>Statut du compte :</strong> {{ user.profile.statut|default:"Actif" }}
          </div>
        </div>
      </section>

      <!-- Options de gestion du compte -->
      <section class="mb-4">
        <h5><i class="bi bi-gear-fill me-2"></i>Options de gestion du compte</h5>
        <hr>
        <div class="d-flex flex-wrap gap-3">
          <a href="{% url 'modifier_informations' %}" class="btn btn-outline-primary">
            <i class="bi bi-pencil-fill me-1"></i>Modifier mes informations
          </a>
          <a href="{% url 'changer_mot_de_passe' %}" class="btn btn-outline-secondary">
            <i class="bi bi-lock-fill me-1"></i>Changer le mot de passe
          </a>
          <a href="{% url 'deconnexion' %}" class="btn btn-outline-danger ms-auto">
            <i class="bi bi-box-arrow-right me-1"></i>Déconnexion
          </a>
        </div>
      </section>

      <!-- Autres éléments utiles -->
      <section class="mb-3 text-center">
        <a href="{% url 'support_contact' %}" class="btn btn-link">Support / Contact aide</a> |
        <a href="{% url 'conditions_generales' %}" class="btn btn-link">Conditions générales</a>
      </section>
    </div>
  </div>
</div>

<!-- Bootstrap Icons CDN (si pas encore inclus) -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
{% endblock %}

