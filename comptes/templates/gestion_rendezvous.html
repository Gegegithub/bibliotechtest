{% extends "base.html" %}
{% block content %}
<div class="container py-5">

    <h2 class="mb-5 text-center fw-light" style="letter-spacing: 1px; color: #212529;">Gestion des Rendez-vous</h2>

    <div class="table-responsive shadow-sm rounded">
        <table class="table align-middle mb-0" style="background-color: #fff;">
            <thead>
                <tr style="border-bottom: 2px solid #dee2e6;">
                    <th class="text-uppercase text-dark small fw-bold">Nom</th>
                    <th class="text-uppercase text-dark small fw-bold">Prénom</th>
                    <th class="text-uppercase text-dark small fw-bold">Email</th>
                    <th class="text-uppercase text-dark small fw-bold">Type utilisateur</th>
                    <th class="text-uppercase text-dark small fw-bold">Ouvrage</th>
                    <th class="text-uppercase text-dark small fw-bold">Date souhaitée</th>
                    <th class="text-uppercase text-dark small fw-bold">Statut</th>
                    <th class="text-uppercase text-dark small fw-bold">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for statut_label, rdvs_liste in groupes.items %}
                    {% if rdvs_liste %}
                        <tr>
                            <td colspan="8" class="fw-bold bg-light text-center py-2">
                                {{ statut_label }}
                            </td>
                        </tr>

                        {% for rdv in rdvs_liste %}
                            <tr class="hover-row">
                                <td>{{ rdv.nom }}</td>
                                <td>{{ rdv.prenom }}</td>
                                <td class="text-muted">{{ rdv.email }}</td>
                                <td>{{ rdv.type_utilisateur }}</td>
                                <td>{{ rdv.titre_ouvrage }}</td>
                                <td>{{ rdv.date_souhaitee }}</td>
                                <td>
                                    {% if rdv.statut == 'en_attente' %}
                                        <span class="badge bg-warning text-dark">{{ rdv.get_statut_display }}</span>
                                    {% elif rdv.statut == 'confirme' %}
                                        <span class="badge bg-success">{{ rdv.get_statut_display }}</span>
                                    {% elif rdv.statut == 'annule' %}
                                        <span class="badge bg-danger">{{ rdv.get_statut_display }}</span>
                                    {% elif rdv.statut == 'termine' %}
                                        <span class="badge bg-secondary">{{ rdv.get_statut_display }}</span>
                                    {% endif %}
                                </td>
                                <td>
                                    <div class="d-flex flex-column align-items-start">
                                        <a href="{% url 'modifier_rdv' rdv.id %}" class="btn btn-sm btn-dark mb-1">Modifier</a>
                                        <a href="mailto:{{ rdv.email }}" class="btn btn-sm btn-outline-dark contact-btn">Contacter</a>
                                    </div>
                                </td>
                            </tr>
                        {% endfor %}
                    {% endif %}
                {% empty %}
                    <tr>
                        <td colspan="8" class="text-center text-muted py-4">Aucun rendez-vous enregistré.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

</div>

<style>
    .hover-row:hover {
        background-color: #f8f9fa;
        transition: background 0.2s ease;
    }
    table th, table td {
        vertical-align: middle;
        font-size: 0.95rem;
    }
    .table-responsive {
        overflow-x: auto;
    }
    .btn-sm {
        font-size: 0.8rem;
        padding: 0.25rem 0.5rem;
    }
    .contact-btn {
        padding: 0.1rem 0.3rem;
        font-size: 0.72rem;
        font-weight: 400;
        border-width: 1px;
        width: auto;
        white-space: nowrap;
        line-height: 1;
    }
    .badge.bg-warning {
        color: #212529;
    }
    .badge.bg-light {
        color: #212529;
    }
</style>
{% endblock %}
                                                                            












